
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>红楼梦 - 章节目录</title>
    <style>
        :root {
            --font-family: 'Noto Sans SC', 'Microsoft YaHei', 'PingFang SC', sans-serif;
            --body-bg-color: #fdfdfd;
            --text-color: #333333;
            --title-color: #1a1a1a;
            --link-color: #333333;
            --link-hover-color: #0056b3;
            --base-font-size: 17px;
            --line-height: 1.7;
            --item-gap: 0.8rem; /* Gap between chapter links */
        }

        body {
            font-family: var(--font-family);
            background-color: var(--body-bg-color);
            color: var(--text-color);
            font-size: var(--base-font-size);
            line-height: var(--line-height);
            margin: 0;
            padding: 2rem 3rem;
            box-sizing: border-box;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
            border-bottom: 1px solid #eee;
            padding-bottom: 1.5rem;
        }

        .main-title {
            font-size: 2.2em;
            color: var(--title-color);
            font-weight: 600;
            margin: 0;
            letter-spacing: 0.1em;
        }

         .content-container {
            max-width: 1100px;
            margin: 0 auto;
        }

        .chapter-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex; /* Use Flexbox */
            flex-wrap: wrap; /* Allow items to wrap */
            gap: var(--item-gap); /* Spacing between items */
        }

        .chapter-list li {
            /* Calculate width for 5 columns, subtracting the gap */
            flex: 0 0 calc(20% - var(--item-gap) * 4 / 5);
            text-align: center;
            box-sizing: border-box; /* Include padding/border in width */
        }

        .chapter-list a {
            text-decoration: none;
            color: var(--link-color);
            font-size: 0.9em;
            transition: color 0.2s ease-in-out, background-color 0.2s ease-in-out;
            display: block; /* Make link fill the li */
            padding: 0.2rem 0.3rem;
            border-radius: 3px;
        }

        .chapter-list a:hover,
        .chapter-list a:focus {
            color: var(--link-hover-color);
            background-color: #f0f0f0;
        }

        /* Responsive adjustments */
        @media (max-width: 1200px) {
            .chapter-list li {
                /* 4 columns */
                flex-basis: calc(25% - var(--item-gap) * 3 / 4);
            }
        }

        @media (max-width: 992px) {
             body { padding: 2rem; }
            .chapter-list li {
                 /* 3 columns */
                flex-basis: calc(33.333% - var(--item-gap) * 2 / 3);
            }
        }

        @media (max-width: 768px) {
             body { padding: 1.5rem; }
             .main-title { font-size: 1.9em; letter-spacing: 0.05em; }
            .chapter-list li {
                 /* 2 columns */
                flex-basis: calc(50% - var(--item-gap) * 1 / 2);
            }
        }

         @media (max-width: 480px) {
             body { padding: 1.5rem 1rem; }
             .main-title { font-size: 1.7em; }
            .chapter-list li {
                 /* 1 column */
                flex-basis: 100%;
                text-align: left; /* Align left on smallest screens */
            }
             .chapter-list a { padding: 0.3rem 0.5rem; } /* More padding for touch */
        }
    </style>
</head>
<body>
    <header class="page-header">
        <h1 class="main-title">红楼梦</h1>
    </header>

    <div class="content-container">
        <ul class="chapter-list" id="chapterList">
            <!-- Links will be generated here by JavaScript -->
        </ul>
    </div>

    <script>
        const chapterList = document.getElementById('chapterList');
        const totalChapters = 120;

        // Function to convert number to Chinese numeral (simplified version)
        function toChineseNumeral(n) {
            if (n < 1 || n > 120) return '';
            const digits = ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九'];
            const units = ['', '十', '百'];
            let s = '';
            const hundred = Math.floor(n / 100);
            const ten = Math.floor((n % 100) / 10);
            const one = n % 10;

             if (hundred > 0) { // 100-120
                 s += digits[hundred] + units[2];
                 if (ten === 0 && one > 0) s += digits[0]; // 101-109 need ling
             }

             if (ten > 0) { // 10-19, 20-29, ..., 110-119
                 if (ten === 1 && (hundred === 0 || n === 110)) { // 10-19 or 110-119
                      if (n >= 10 && n < 20) s += units[1]; // 十, 十一, ...十九
                      else if (n >= 110 && n < 120) s+= digits[ten] + units[1]; //一百一十, 一百一十一...

                 } else { // 20, 30..90, 120
                     s += digits[ten] + units[1]; // 二十, 三十... 一百二十
                 }
             }

             if (one > 0) {
                // Only add 'one' if ten is not 1 (already handled "十一" to "十九")
                // Or if it's cases like 21, 31.. or 101, 111
                 if (ten !== 1 || n<10 || n > 19) {
                    s += digits[one];
                 }
             }
             // Special case cleanups
             if (n===10) return '第十';
             if (n===20) return '第二十';
             if (n===30) return '第三十';
             if (n===40) return '第四十';
             if (n===50) return '第五十';
             if (n===60) return '第六十';
             if (n===70) return '第七十';
             if (n===80) return '第八十';
             if (n===90) return '第九十';
             if (n===100) return '第一百';
             if (n===110) return '第一百一十';
             if (n===120) return '第一百二十';


            return `第${s}`; // Prepend '第' for chapter number
        }

        // Generate links (Ensuring it runs only once)
        if (chapterList.children.length === 0) { // Check if list is empty before populating
             for (let i = 1; i <= totalChapters; i++) {
                const listItem = document.createElement('li');
                const link = document.createElement('a');
                const chapterNumber = String(i).padStart(3, '0'); // Format as 001, 002, etc.
                link.href = `${chapterNumber}.html`;
                link.textContent = `${toChineseNumeral(i)}回`; // Add 回 character
                listItem.appendChild(link);
                chapterList.appendChild(listItem);
            }
        } else {
            console.warn("Chapter list already populated. Skipping generation.");
        }
    </script>

<script>window.parent.postMessage({ action: "ready" }, "*"); 
 
window.console = new Proxy(console, {
  get(target, prop) {
    if (['log', 'warn', 'error'].includes(prop)) {
      return new Proxy(target[prop], {
        apply(fn, thisArg, args) {
          fn.apply(thisArg, args);
          window.parent.postMessage({ action: 'console', 
            type: prop, 
            args: args.map((arg) => {
              try {
                return JSON.stringify(arg).replace(/^["']|["']$/g, '');
              } catch (e) {
                return arg;
              }
            }) 
          }, '*');
        }
      });
    }
    return target[prop];
  }
});
</script></body>
</html>
